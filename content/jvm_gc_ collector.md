# 7种jvm垃圾回收器，这次全部搞懂

之前我们讲解了jvm的组成结构与垃圾回收算法等知识点，今天我们来讲讲jvm最重要的堆内存是如何使用垃圾回收器进行垃圾回收，并且如何使用命令去配置使用这些垃圾回收器。


## 堆内存垃圾回收过程
### 第一步
新生成的对象首先放到Eden区，当Eden区满了会触发Minor GC。

### 第二步
第一步GC活下来的对象，会被移动到survivor区中的S0区，S0区满了之后会触发Minor GC，S0区存活下来的对象会被移动到S1区，S0区空闲。

S1满了之后在GC，存活下来的再次移动到S0区，S1区空闲，这样反反复复GC，每GC一次，对象的年龄就涨一岁，达到某个值后（15），就会进入老年代。

### 第三步
在发生一次Minor GC后（前提条件），老年代可能会出现Major GC，这个视垃圾回收器而定。
* Full GC触发条件
* 手动调用System.gc，会不断的执行Full GC
* 老年代空间不足/满了
* 方法区空间不足/满了

## 回收哪些区域的对象
需要注意的是，JVM GC只回收堆内存和方法区内的对象。而栈内存的数据，在超出作用域后会被JVM自动释放掉，所以其不在JVM GC的管理范围内。

## 垃圾回收器总览
![image](https://user-images.githubusercontent.com/13992911/115179669-6ddce180-a106-11eb-9df9-4e932c371256.png)

新生代可配置的回收器：Serial、ParNew、Parallel Scavenge

老年代配置的回收器：CMS、Serial Old、Parallel Old

新生代和老年代区域的回收器之间进行连线，说明他们之间可以搭配使用。

